---
/**
 * Google Analytics 4 (GA4) Integration
 *
 * Uses gtag.js with Partytown for optimal performance
 * Only loads in production builds
 */

interface Props {
  measurementId: string;
}

const { measurementId } = Astro.props;
---

<!-- Only load in production -->
{measurementId && (
  <script is:inline define:vars={{ measurementId }}>
    // Load GA4 gtag.js
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', measurementId);
  </script>
)}
{measurementId && (
  <script is:inline src={`https://www.googletagmanager.com/gtag/js?id=${measurementId}`}></script>
)}
